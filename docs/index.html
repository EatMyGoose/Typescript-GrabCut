<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Grabcut</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="centre-col">
        <div class="header-section">
            <h1>GrabCut</h1>
        </div>
        <div class="h-flex-container">
            <div class="flex-child">
                <h2>Editor</h2>
                <div class="row-height">
                    <label for="file-image">File:</label>
                    <input type="file" id="file-image" accept="image/*"></input>
                </div>
                <div id="canvas-container" class="border">
                    <canvas id="canvas-top" class="z2 ignore-mouse trans-50"></canvas>
                    <canvas id="canvas-main" class="z1"></canvas>
                </div>
                <br>
                <button id="btn-crop">Crop</button>
                <!-- User touchup tools -->
                <div>
                    <h3>Touchup</h3>

                    <input type="radio" name="brush" value="fg-rect" checked>Rect Select</input>

                    <input type="radio" name="brush" value="fg">Foreground</input>

                    <input type="radio" name="brush" value="bg">Background</input>

                    <input type="radio" name="brush" value="erase">Erase</input>

                    </br>
                    <label for="range-brush-size">Brush Size:</label>
                    <input id="range-brush-size" type="range" min="1" max="50" step="1" value="20"></input>

                    </br>
                    <p class="subscript">
                        <span><strong>Undo:</strong> Ctrl + Z</span>
                        <span><strong>Pan:</strong> RMB + drag</span>
                        <span><strong>Zoom:</strong> Scroll</span>
                    </p>
                    </br>

                    <h4>Legend:</h4>
                    <p><span class="blue">Blue</span>:Background, <span class="red">Red</span>:Foreground, Unmarked:
                        Unknown (will be managed by the GrabCut algorithm)</p>

                </div>
                <br>
                <div id="Fine Tuning">
                    <h3>Advanced Settings:</h3>

                    <table>
                        <tr>
                            <td>
                                <label for="text-max-iter">Max GrabCut Iterations:</label>
                            </td>
                            <td>
                                <input id="text-max-iter" class="tb-small" data-default="5" data-err-class="error"
                                    value="5" type="number" min="1" max="10"></input>
                            </td>
                            <td>
                                <label for="text-fg-gmms">FG GMM clusters:</label>
                            </td>
                            <td>
                                <input id="text-fg-gmms" class="tb-small" data-default="5" data-err-class="error"
                                    value="5" type="number" min="1" max="10"></input>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="text-iter-convergence">Convergence Criteria (%):</label>
                                <br>
                            </td>
                            <td>
                                <input id="text-iter-convergence" class="tb-small" data-default="1"
                                    data-err-class="error" value="1" type="number" min="0" max="100" step="0.2"></input>
                            </td>
                            <td>
                                <label for="text-bg-gmms">BG GMM clusters:</label>
                            </td>
                            <td>
                                <input id="text-bg-gmms" class="tb-small" data-default="5" data-err-class="error"
                                    value="5" type="number" min="1" max="10"></input>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="text-cohesiveness">Cohesion Factor:</label>
                            </td>
                            <td>
                                <input id="text-cohesiveness" class="tb-small" data-default="50" data-err-class="error"
                                    value="50" type="number" min="1" max="500"></input>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="flex-child">
                <h2>Preview</h2>
                <div class="row-height">

                </div>
                <img id='img-preview' class="preview-image border"></img>
                <br />
                <div>
                    <button id="btn-alpha">Alpha Mask</button>
                    <button id="btn-img">Image</button>
                    <a id="a-download" class="right" download="cropped" disabled>Download</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <script src="out.js"></script>
    <script>
        let m = require(["WebPage/PageMain"]);
    </script>
</body>

</html>